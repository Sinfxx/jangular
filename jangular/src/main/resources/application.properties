spring.application.name=jangular

# Details for our datasource
# Use ${DB_HOST:localhost} to support both Docker (postgres) and local dev (localhost)
spring.datasource.url = jdbc:postgresql://${DB_HOST:localhost}:5432/myappdb
spring.datasource.username = myuser
spring.datasource.password = secret

# Hibernate properties
spring.jpa.database = POSTGRESQL
spring.jpa.show-sql = true
spring.jpa.hibernate.ddl-auto = update
spring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyJpaCompliantImpl
spring.jpa.properties.hibernate.format_sql=true

# OAuth2 Resource Server configuration
# Issuer must match what's in JWT tokens (localhost for browser access)
# JWK URI uses container name for internal Docker communication
spring.security.oauth2.resourceserver.jwt.issuer-uri=${KEYCLOAK_ISSUER:http://localhost:8080/realms/jangular}
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${KEYCLOAK_JWK_URI:http://localhost:8080/realms/jangular/protocol/openid-connect/certs}

# Enable debug logging for OAuth2 and Security
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.oauth2=DEBUG
